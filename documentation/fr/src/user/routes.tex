\chapter*{Préparation des routes}

\section{Objet}
 L'objet de cette section est de décrire les différentes étapes de préparation d'une route : choix des cartes, 
  définition des waypoints, tracé de la route, repérage des dangers, calculs des distances, sauvegarde et simulation du trajet.
\hbox{}\vspace{0.2cm}


\hbox{}\vspace{0.2cm}
\section{Choix des cartes}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\begin{center}
		\framebox[1\width]{
			\includegraphics[width=15cm]{images/routes/route1.png}
		}
		\begin{figure}[ht]
			\caption{\label{0}\textit{Choix des cartes à partir du catalogue ou directement}}
		\end{figure}
	\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Sélection du menu RouteEditor}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
	\begin{center}
		\framebox[1\width]{
			\includegraphics[width=15cm]{images/routes/route2.png}
		}
		\begin{figure}[ht]
			\caption{\label{0}\textit{Menu Navigation/Routes/RouteEditor : l'éditeur de routes}}
		\end{figure}
	\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
		\begin{center}
			\framebox[1\width]{
				\includegraphics[width=15cm]{images/routes/route3.png}
			}
			\begin{figure}[ht]
				\caption{\label{0}\textit{Menu RouteEditor : les paramètres de la route}}
			\end{figure}
		\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Description du menu RouteEditor}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
			\begin{center}
				\framebox[1\width]{
					\includegraphics[width=14cm]{images/routes/routeeditor_1.png}
				}
				\begin{figure}[ht]
					\caption{\label{0}\textit{Menu RouteEditor : les items}}
				\end{figure}
			\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{itemize}
	\item Les commandes
		\begin{itemize}
		\item Le bouton {\tt New} : début de la définition d'une route.
		\item Le bouton {\tt Open} : ouverture d'une route sauvegardée au format GPX.
		\item Le bouton {\tt Pause } : permet de se déplacer interactivement dans les cartes sans marquer de waypoint, {\tt Resume} permet de revenir au mode édition.
		\item Le bouton {\tt End } : termine une route, il doit, impérativement ,être  pressé, en fin de route.
		\item Le bouton {\tt Offset} : permet de définir une zone de sécurité autour de la route.
		\item Le bouton {\tt Export Gpx} : sauvegarde de la route, et si elle définie, de la zone de sécurité, sous format Gpx.
		\item Le bouton {\tt Export Kml} : sauvegarde de la route au format KML.
		\item Le bouton {\tt Export NMEA} : sauvegarde de la route sous forme de phrases NMEA, pour une simulation de déplacement.
		\item Le bouton {\tt Snapshot} : copie d'écran.
		\end{itemize}
	\item Les données utilisateur
		\begin{itemize}
			\item Les fichiers
			\begin{itemize}		
			 	\item Le champs {\tt Name }: définit les noms des fichiers de sauvegarde aux formats GPX, KML, NMEA. Ces fichiers seront créés dans les répertoires {\tt data/gpx/, data/kml/, data/nmea/} respectivement.
			    \item Le champs {\tt Version } : numéro de version dans le fichier GPX.
				\item Le champs {\tt Author }: nom de l'auteur dans le fichier GPX.
			\end{itemize}
			\item Les Waypoints
			\begin{itemize}
				\item Le champs {\tt Name }: par défaut les waypoints sont nommés WP0, WP1, \ldots Il est possible de leur donner un nom particulier.
				\item Le champs {\tt Desc. } texte de description du waypoint.
		     \end{itemize}
		     \item La route
		     \begin{itemize}
		     	\item Le champs {\tt Speed }: vitesse moyenne du navire.
		     	\item Le champs {\tt Dist. point d'ordre } : distance permettant de définir un waypoint d'alerte pour changement de cap.
		     	\item Le champs {\tt Dist. offset }: définit la largeur de la bande de sécurité entourant la route.
		     \end{itemize}
		     \end{itemize}
	 \item L'affichage
	 \begin{itemize}
	 	\item Le champs {\tt  Units} : définit les unités d'affichage
	 	\item Le champs {\tt  Angle} :  définit le mode d'affichage des angles
	 	\item Le champs {\tt  Length} : affiche la longueur du track courant
	 	\item Le champs {\tt  Heading} : affiche l'azimut du track courant
	 	\item Le champs {\tt  Total length} : affiche la longueur totale du trajet
	 	\item Le champs {\tt  LatLon} : affiche la position du waypoint courant
	 \end{itemize}
\end{itemize}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Tracé de la route}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Le bouton {\tt Pause-Resume} permet d'utiliser le zoom le plus intéressant pour voir les détails de la carte et se déplacer dans l'univers sans créer des points parasites.
\begin{center}
	\framebox[1\width]{
		\includegraphics[width=14cm]{images/routes/route4.png}
	}
	\begin{figure}[ht]
		\caption{\label{0}\textit{Tracé de la route}}
	\end{figure}
\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Définition de la zone de sécurité}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{center}
	\framebox[1\width]{
		\includegraphics[width=14cm]{images/routes/route5.png}
	}
	\begin{figure}[ht]
		\caption{\label{0}\textit{Le bouton {\tt Offset}  lance le calcul d'une zone de sécurité autour de la route}}
	\end{figure}
\end{center}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Sauvegardes}
 \begin{itemize}
 \item Le bouton {\tt Export Gpx} : sauvegarde de la route, et si elle définie, de la zone de sécurité, sous format GPX.
 \item Le bouton {\tt Export Kml} : sauvegarde de la route au format KML.
 \item Le bouton {\tt Export NMEA} : sauvegarde de la route sous forme de phrases NMEA, pour une simulation de déplacement.
 \end{itemize}
 \section{Simulation}
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \subsection*{Choix du navire}
  Les paramètres propres au navire propriétaire sont définis dans le fichier, domain.properties. Ces paramètres sont :
   \begin{itemize}
   	\item Lignes 2-12 : caractéristiques légales et physiques du navire
   	\item Lignes 13-18 : position et orientation initiale du navire
   	\item Ligne 19 : nom du fichier, format COLLADA, représentant le navire en 3D
   	\item Lignes 21-23 : corrections éventuelles de cet objet
   \end{itemize}
  \begin{center}
  	\framebox[1\width]{
  		\includegraphics[width=9cm]{images/routes/route_8.png}
  	}
  	\begin{figure}[ht]
  		\caption{\label{0}\textit{Les parametres du {\em ownership}}}
  	\end{figure}
  \end{center}
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 \begin{center}
 	\framebox[1\width]{
 		\includegraphics[width=14cm]{images/routes/route6.png}
 	}
 		\begin{figure}[ht]
 			\caption{\label{0}\textit{GpsPlot On du menu Instruments/Navigation/Gps}}
 		\end{figure}
 	\end{center}
 	%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 \begin{center}
 	\framebox[1\width]{
 		\includegraphics[width=14cm]{images/routes/route7.png}
 	}
 	\begin{figure}[ht]
 		\caption{\label{0}\textit{Choix du fichier Gps à rejouer}}
 	\end{figure}
 \end{center}
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
 \begin{center}
 	\framebox[1\width]{
 		\includegraphics[width=14cm]{images/routes/route8.png}
 	}
 	\begin{figure}[ht]
 		\caption{\label{0}\textit{Simulation de la route avec la couche GpsTrack}}
 	\end{figure}
 \end{center}
 %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
  \begin{center}
  	\framebox[1\width]{
  		\includegraphics[width=14cm]{images/routes/route9.png}
  	}
  	\begin{figure}[ht]
  		\caption{\label{0}\textit{Simulation de la route avec la couche KML}}
  	\end{figure}
  \end{center}
  %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

